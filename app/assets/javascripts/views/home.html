<div class="container">
  <h1>Welcome {{user.username}}</h1>
    <div ng-if ="user.role == 'user'"class="contentpanel">
      <div class="panel panel-primary-head">
        <div class="panel-heading">
          <h3 class="panel-title">History of Leaves & Absences</h3>
          <br>
          <div class="form-group  col-md-4" style="float:right; margin-bottom :20px;">
            <input type="search" class="form-control col-md-3" ng-model="searchText" placeholder="search ... ">
          </div>
          <button type="button" class="btn btn-holiday btn-info btn-lg" data-toggle="modal" data-target="#myModal">Ask for an authorized leave</button>
        </div><!-- panel-heading -->

        <table id="userTable" class="table table-striped table-bordered responsive">
          <thead>
            <tr>
              <th>Starting Date</th>
              <th>End Date</th>
              <th>Motive</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="holiday in holidays | filter: searchText">
              <td>{{holiday.dateStart}}</td>
              <td>{{holiday.dateEnd}}</td>
              <td>{{holiday.reason}}</td>
              <td>{{holiday.state}}</td>
            </tr>
          </tbody>
        </table>

      </div><!-- panel -->
      VOTRE SOLDE EST {{user.balance}}
    </div>


    <!-- Admin Display -->
    <div ng-if ="user.role == 'admin'" class="contentpanel">
      <div class="panel panel-primary-head">
        <div class="panel-heading">
          <h3 class="panel-title">List of Leaves & Absences</h3>
          <br>
          <div class="form-group  col-md-4" style="float:right; margin-bottom :20px;">
            <input type="search" class="form-control col-md-3" ng-model="searchText" placeholder="search ... ">
          </div>
        </div><!-- panel-heading -->
        <table id="userTable" class="table table-striped table-bordered responsive">
          <thead>
            <tr>
              <th>Employee</th>
              <th>Starting Date</th>
              <th>End Date</th>
              <th>Motive</th>
              <th>Status</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="holiday in holidays | filter: searchText">
              <td></td>
              <td>{{holiday.dateStart}}</td>
              <td>{{holiday.dateEnd}}</td>
              <td>{{holiday.reason}}</td>
              <td>{{holiday.state}}</td>
              <td>
                <i data-toggle="modal" data-target="#UserModal" class="fa fa-eye" style="font-size:20px;color:#333333;"></i>&nbsp;
                <i style="font-size:20px;color: red;" class="fa fa-close"></i>&nbsp;
              <a ng-click="acceptRequest(holiday.id,holiday.user_id,holiday.dateStart,holiday.dateEnd,holiday.balance)">  <i style="font-size:20px;color: green;" class="fa fa-check"></i></a>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!--Display Holiday details-->
    <div class="modal fade" id="UserModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Absence's Details</h4>
          </div>
          <div class="modal-body">
            <table style="width:100%">
              <tr>
                <th>First Name:</th>
                <td>Bill Gates</td>
              </tr>
              <tr>
                <th>Last Name:</th>
                <td>555 77 854</td>
              </tr>
              <tr>
                <th>Telephone:</th>
                <td>555 77 854</td>
              </tr>
              <tr>
                <th>Starting Date:</th>
                <td>555 77 855</td>
              </tr>
              <tr>
                <th>End Date:</th>
                <td>555 77 855</td>
              </tr>
              <tr>
                <th>Status</th>
                <td>555 77 855</td>
              </tr>
              <tr>
                <th>Motive</th>
                <td>555 77 855</td>
              </tr>
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
    <!--Ask for a holiday-->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Ask for an authorized leave</h4>
          </div>

          <div class="modal-body">
            <form name="myForm" ng-submit="sendDemande()">
              <div class="form-group">
                <label for="exampleFormControlInput1">Starting Date</label>
                <input type="date" ng-model="dateStart" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
              </div>
              <div class="form-group">
                <label for="exampleFormControlInput1">End Date</label>
                <input ng-model="dateEnd" type="date" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
              </div>

              <div class="form-group">
                <label for="exampleFormControlTextarea1">Motive</label>
                <textarea ng-model="reason" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
              </div>
              <button ng-disabled="myForm.$invalid || myForm.$pending" type="submit" class="btn btn-default">Save</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </form>
          </div>
        </div>

      </div>
    </div>
