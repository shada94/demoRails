I"¹(function() {
  angular.module('myApp').controller('HomeCtrl', function($scope, Auth, $location, $http, userService, $window) {
    $scope.user = JSON.parse($window.localStorage.getItem("currentUser"));
    if ($scope.user != null) {
      $http.get('/GetLoggedUserInfo').then(function(res) {
        $scope.user = res.data.data;
        if ($scope.user != null) {
          return userService.getUserHolidays($scope.user.id).then(function(res) {
            return console.log($scope.user.id);
          })["catch"](function(e) {
            return console.log('access denied for user', e);
          });
        } else {
          return $location.path('/login');
        }
      });
    }
    return $scope.sendDemande = function() {
      var date1, date2;
      date1 = moment($scope.dateStart);
      date2 = moment($scope.dateEnd);
      return userService.sendDemande($scope.user.id, date1.format(), date2.format(), $scope.reason).then(function(res) {
        $scope.dateStart = '';
        $scope.dateEnd = '';
        $scope.reason = '';
        $scope.showMsgValid = true;
        return userService.getUserHolidays($scope.user.id).then(function(res) {
          return $scope.holidays = res;
        });
      })["catch"](function(e) {
        return console.log('reject holiday for user', e);
      }, function(error) {
        console.log('error send request', error);
        return $scope.showMsgError = true;
      });
    };
  });

}).call(this);
:ET